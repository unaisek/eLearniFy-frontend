<div class="h-full p-2 flex flex-col">
    <div class="flex-1 overflow-hidden max-h-screen overflow-y-auto p-4 mt-2 rounded-md shadow-md">
        <div *ngFor="let message of allMessages"
         class="chat"  [ngClass]="message?.senderId._id == userId || message?.senderId == userId ? 'chat-end': 'chat-start' ">
            <div class="chat-image avatar" *ngIf="userId !== message?.senderId._id && userId !== message?.senderId " >
                <div class="w-10 rounded-full">
                    <img alt="Tailwind CSS chat bubble component"
                        src="{{message?.senderId?.profileImage ? message?.senderId?.profileImage  : '../../../../assets/default-user.webp'}}"/>
                </div>
            </div>
            <div class="chat-header">
                {{userId !== message?.senderId._id && userId !== message?.senderId ? message?.userName : 'you' }}
                <time class="text-xs opacity-50">{{message?.createdAt | date:'shortTime'}}</time>
            </div>
            <div class="chat-bubble bg-emerald-700 text-white ">{{message?.message}}</div>
        </div>
    </div>

    <form>
        <div class="flex items-center px-3 py-2 rounded-lg bg-gray-50 mt-2">

            <textarea
                class="block mx-4 p-2.5 w-full text-sm text-gray-900 bg-white rounded-lg border border-gray-300 focus:ring-orange-300 focus:border-orange-300 resize-none"
                placeholder="Your message..."
                rows="1"
                 [(ngModel)]="text" 
                 [ngModelOptions]="{standalone: true}"></textarea>
               

            <mat-icon class="text-2xl text-emerald-700 hover:text-onHoverButton transition duration-200"
                (click)="onSubmitMessage()"
                (keyup.enter)="onSubmitMessage()">
                send
            </mat-icon>
        </div>
    </form>
</div>
